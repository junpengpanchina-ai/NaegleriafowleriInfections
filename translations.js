// ÁøªËØëÁ≥ªÁªü
class TranslationSystem {
    constructor() {
        this.currentLanguage = localStorage.getItem('preferred-language') || 'en';
        this.translations = {
            en: {
                // È°µÈù¢Ê†áÈ¢òÂíåÂü∫Êú¨‰ø°ÊÅØ
                pageTitle: 'Naegleria fowleri Infection | CDC',
                metaDescription: 'Learn about Naegleria fowleri infections, symptoms, prevention, and treatment from the CDC.',
                mainTitle: 'Naegleria fowleri Infection',
                pageSubtitle: 'Naegleria fowleri Infections',
                
                // Â§¥ÈÉ®ÂØºËà™
                govBannerText: 'An official website of the United States government',
                govBannerToggle: 'Here\'s how you know',
                govInfoOfficial: 'Official websites use .gov',
                govInfoOfficialDesc: 'A .gov website belongs to an official government organization in the United States.',
                govInfoSecure: 'Secure .gov websites use HTTPS',
                govInfoSecureDesc: 'A lock icon or https:// means you\'ve safely connected to the .gov website.',
                exploreTopicBtn: 'EXPLORE THIS TOPIC',
                searchPlaceholder: 'Search CDC',
                searchBtn: 'SEARCH',
                
                // ÂØºËà™ËèúÂçï
                forEveryone: 'For Everyone',
                healthcareProviders: 'Health Care Providers',
                publicHealth: 'Public Health',
                about: 'About',
                symptoms: 'Symptoms',
                causes: 'Causes',
                prevention: 'Prevention',
                treatment: 'Treatment',
                riskFactors: 'Risk Factors',
                clinicalFeatures: 'Clinical Features',
                diagnosis: 'Clinical Testing and Diagnosis',
                clinicalCare: 'Clinical Care',
                treatmentProtocols: 'Treatment Protocols',
                caseManagement: 'Case Management',
                differentialDiagnosis: 'Differential Diagnosis',
                guidance: 'Guidance',
                surveillance: 'Surveillance',
                outbreakResponse: 'Outbreak Response',
                preventionPrograms: 'Prevention Programs',
                dataStatistics: 'Data & Statistics',
                research: 'Research',
                viewAll: 'VIEW ALL',
                
                // Áõ∏ÂÖ≥‰∏ªÈ¢ò
                relatedTopics: 'Related Topics:',
                acanthamoebaInfections: 'Acanthamoeba Infections',
                recreationalWaterSafety: 'Recreational Water Safety',
                parasiticDiseases: 'Parasitic Diseases',
                
                // Êó•ÊúüÂíåÊ†áÁ≠æ
                audienceTag: 'For Everyone',
                spanishLink: 'ESPA√ëOL',
                
                // ‰∏ªË¶ÅÂÜÖÂÆπ
                keyPoints: 'KEY POINTS',
                moreInformation: 'MORE INFORMATION',
                keyPoint1: 'Naegleria fowleri is a free-living amoeba, a kind of one-celled organism that thrives in warm freshwater lakes, rivers, and hot springs.',
                keyPoint2: 'It is often called the "brain-eating amoeba" because it can infect the brain and destroy brain tissue.',
                keyPoint3: 'Brain infections caused by Naegleria fowleri are very rare but nearly always fatal.',
                
                // ÁóáÁä∂ÈÉ®ÂàÜ  
                symptomsTitle: 'Symptoms and Diagnosis',
                symptomsDescription: 'Initial symptoms of PAM (Primary Amebic Meningoencephalitis) start about 5 days after infection and may include:',
                symptom1: 'Headache',
                symptom2: 'Fever',
                symptom3: 'Nausea or vomiting',
                symptom4: 'Stiff neck',
                laterSymptoms: 'Later symptoms may include seizures, altered mental status, hallucinations, and focal neurologic deficits.',
                
                // È¢ÑÈò≤ÈÉ®ÂàÜ
                preventionTitle: 'Prevention',
                preventionDescription: 'You can reduce your risk by following these prevention tips:',
                prevention1: 'Avoid jumping or diving into warm freshwater',
                prevention2: 'Hold your nose shut or use nose clips when jumping or diving',
                prevention3: 'Avoid putting your head underwater in hot springs and thermally-polluted water',
                prevention4: 'Avoid water activities in warm freshwater during periods of high water temperature',
                
                // Ê≤ªÁñóÈÉ®ÂàÜ
                treatmentTitle: 'Treatment',
                treatmentDescription: 'Treatment for PAM is difficult because the infection progresses rapidly. Several drugs have shown promise in laboratory studies, including:',
                treatment1: 'Amphotericin B',
                treatment2: 'Azithromycin',
                treatment3: 'Fluconazole',
                treatment4: 'Rifampin',
                treatment5: 'Miltefosine',
                treatmentNote: 'Early diagnosis and treatment are critical. If you have symptoms after recent freshwater activities, seek medical attention immediately.',
                
                // ÁªüËÆ°Êï∞ÊçÆ
                statisticsTitle: 'Statistics and Surveillance',
                totalCases: 'Total cases in the U.S. (1962-2021)',
                fatalityRate: 'Case fatality rate',
                survivors: 'Known survivors worldwide',
                summerNote: 'Most infections occur during the summer months when water temperatures are highest.',
                
                // ÂÜÖÂÆπÈÉ®ÂàÜÊ†áÈ¢ò
                aboutTitle: 'ABOUT NAEGLERIA FOWLERI',
                causesTitle: 'CAUSES & TRANSMISSION',
                clinicalFeaturesTitle: 'CLINICAL FEATURES',
                clinicalTestingTitle: 'CLINICAL TESTING & DIAGNOSIS',
                publicHealthGuidanceTitle: 'PUBLIC HEALTH GUIDANCE',
                dataStatisticsTitle: 'DATA & STATISTICS',
                resourcesTitle: 'RESOURCES',
                latestArticlesTitle: 'LATEST ARTICLES & UPDATES',
                
                // ‰æßËæπÊ†è
                quickLinks: 'Quick Links',
                overview: 'Overview',
                resources: 'Resources',
                relatedTopicsTitle: 'Related Topics',
                allRelatedTopics: 'All Related Topics',
                recentArticles: 'Recent Articles',
                stayInformed: 'Stay Informed',
                emailUpdates: 'Get email updates about this topic',
                emailPlaceholder: 'Enter your email',
                subscribe: 'Subscribe',
                shareThisPage: 'Share This Page',
                
                // ÊñáÁ´†Áõ∏ÂÖ≥
                viewAllArticles: 'View All Articles ‚Üí',
                noArticles: 'No published articles yet',
                goToAdmin: 'Go to admin panel',
                publishFirstArticle: 'to publish your first article',
                loading: 'Loading...',
                loadingArticles: 'üìù Loading latest articles...',
                
                // È°µËÑö
                aboutCDC: 'About CDC',
                mission: 'Mission',
                leadership: 'Leadership',
                organization: 'Organization',
                jobs: 'Jobs',
                policies: 'Policies',
                privacyPolicy: 'Privacy Policy',
                accessibility: 'Accessibility',
                foia: 'FOIA',
                qualityStandards: 'Quality Standards',
                connect: 'Connect',
                contactUs: 'Contact Us',
                emailUpdatesFooter: 'Email Updates',
                socialMedia: 'Social Media',
                mobileApp: 'Mobile App',
                languages: 'Languages',
                copyright: '¬© 2025 Centers for Disease Control and Prevention. All rights reserved.',
                department: 'U.S. Department of Health & Human Services | CDC',
                
                // ÂÖ±‰∫´ÊåâÈíÆ
                facebook: 'Facebook',
                twitter: 'Twitter',
                linkedin: 'LinkedIn',
                print: 'Print'
            },
            es: {
                // È°µÈù¢Ê†áÈ¢òÂíåÂü∫Êú¨‰ø°ÊÅØ
                pageTitle: 'Infecci√≥n por Naegleria fowleri | CDC',
                metaDescription: 'Aprenda sobre las infecciones por Naegleria fowleri, s√≠ntomas, prevenci√≥n y tratamiento del CDC.',
                mainTitle: 'Infecci√≥n por Naegleria fowleri',
                pageSubtitle: 'Infecciones por Naegleria fowleri',
                
                // Â§¥ÈÉ®ÂØºËà™
                govBannerText: 'Un sitio web oficial del gobierno de los Estados Unidos',
                govBannerToggle: 'As√≠ es como usted puede verificarlo',
                govInfoOfficial: 'Los sitios web oficiales usan .gov',
                govInfoOfficialDesc: 'Un sitio web .gov pertenece a una organizaci√≥n oficial del gobierno de Estados Unidos.',
                govInfoSecure: 'Los sitios web seguros .gov usan HTTPS',
                govInfoSecureDesc: 'Un candado o https:// significa que usted se conect√≥ de forma segura a un sitio web .gov.',
                exploreTopicBtn: 'EXPLORAR ESTE TEMA',
                searchPlaceholder: 'Buscar CDC',
                searchBtn: 'BUSCAR',
                
                // ÂØºËà™ËèúÂçï
                forEveryone: 'Para Todos',
                healthcareProviders: 'Proveedores de Atenci√≥n M√©dica',
                publicHealth: 'Salud P√∫blica',
                about: 'Acerca de',
                symptoms: 'S√≠ntomas',
                causes: 'Causas',
                prevention: 'Prevenci√≥n',
                treatment: 'Tratamiento',
                riskFactors: 'Factores de Riesgo',
                clinicalFeatures: 'Caracter√≠sticas Cl√≠nicas',
                diagnosis: 'Pruebas Cl√≠nicas y Diagn√≥stico',
                clinicalCare: 'Atenci√≥n Cl√≠nica',
                treatmentProtocols: 'Protocolos de Tratamiento',
                caseManagement: 'Manejo de Casos',
                differentialDiagnosis: 'Diagn√≥stico Diferencial',
                guidance: 'Orientaci√≥n',
                surveillance: 'Vigilancia',
                outbreakResponse: 'Respuesta a Brotes',
                preventionPrograms: 'Programas de Prevenci√≥n',
                dataStatistics: 'Datos y Estad√≠sticas',
                research: 'Investigaci√≥n',
                viewAll: 'VER TODO',
                
                // Áõ∏ÂÖ≥‰∏ªÈ¢ò
                relatedTopics: 'Temas Relacionados:',
                acanthamoebaInfections: 'Infecciones por Acanthamoeba',
                recreationalWaterSafety: 'Seguridad del Agua Recreativa',
                parasiticDiseases: 'Enfermedades Parasitarias',
                
                // Êó•ÊúüÂíåÊ†áÁ≠æ
                audienceTag: 'Para Todos',
                spanishLink: 'ENGLISH',
                
                // ‰∏ªË¶ÅÂÜÖÂÆπ
                keyPoints: 'PUNTOS CLAVE',
                moreInformation: 'M√ÅS INFORMACI√ìN',
                keyPoint1: 'Naegleria fowleri es una ameba de vida libre, un tipo de organismo unicelular que prospera en lagos, r√≠os y aguas termales de agua dulce tibia.',
                keyPoint2: 'A menudo se le llama la "ameba comecerebros" porque puede infectar el cerebro y destruir el tejido cerebral.',
                keyPoint3: 'Las infecciones cerebrales causadas por Naegleria fowleri son muy raras pero casi siempre mortales.',
                
                // ÁóáÁä∂ÈÉ®ÂàÜ
                symptomsTitle: 'S√≠ntomas y Diagn√≥stico',
                symptomsDescription: 'Los s√≠ntomas iniciales de MAP (Meningoencefalitis Amebiana Primaria) comienzan aproximadamente 5 d√≠as despu√©s de la infecci√≥n y pueden incluir:',
                symptom1: 'Dolor de cabeza',
                symptom2: 'Fiebre',
                symptom3: 'N√°useas o v√≥mitos',
                symptom4: 'Rigidez del cuello',
                laterSymptoms: 'Los s√≠ntomas posteriores pueden incluir convulsiones, estado mental alterado, alucinaciones y d√©ficits neurol√≥gicos focales.',
                
                // È¢ÑÈò≤ÈÉ®ÂàÜ
                preventionTitle: 'Prevenci√≥n',
                preventionDescription: 'Puede reducir su riesgo siguiendo estos consejos de prevenci√≥n:',
                prevention1: 'Evite saltar o zambullirse en agua dulce tibia',
                prevention2: 'Mantenga la nariz cerrada o use pinzas nasales al saltar o zambullirse',
                prevention3: 'Evite poner la cabeza bajo el agua en aguas termales y agua contaminada t√©rmicamente',
                prevention4: 'Evite actividades acu√°ticas en agua dulce tibia durante per√≠odos de alta temperatura del agua',
                
                // Ê≤ªÁñóÈÉ®ÂàÜ
                treatmentTitle: 'Tratamiento',
                treatmentDescription: 'El tratamiento para MAP es dif√≠cil porque la infecci√≥n progresa r√°pidamente. Varios medicamentos han mostrado promesa en estudios de laboratorio, incluyendo:',
                treatment1: 'Anfotericina B',
                treatment2: 'Azitromicina',
                treatment3: 'Fluconazol',
                treatment4: 'Rifampina',
                treatment5: 'Miltefosina',
                treatmentNote: 'El diagn√≥stico y tratamiento temprano son cr√≠ticos. Si tiene s√≠ntomas despu√©s de actividades recientes en agua dulce, busque atenci√≥n m√©dica inmediatamente.',
                
                // ÁªüËÆ°Êï∞ÊçÆ
                statisticsTitle: 'Estad√≠sticas y Vigilancia',
                totalCases: 'Casos totales en EE.UU. (1962-2021)',
                fatalityRate: 'Tasa de letalidad',
                survivors: 'Sobrevivientes conocidos mundialmente',
                summerNote: 'La mayor√≠a de las infecciones ocurren durante los meses de verano cuando las temperaturas del agua son m√°s altas.',
                
                // ÂÜÖÂÆπÈÉ®ÂàÜÊ†áÈ¢ò
                aboutTitle: 'ACERCA DE NAEGLERIA FOWLERI',
                causesTitle: 'CAUSAS Y TRANSMISI√ìN',
                clinicalFeaturesTitle: 'CARACTER√çSTICAS CL√çNICAS',
                clinicalTestingTitle: 'PRUEBAS CL√çNICAS Y DIAGN√ìSTICO',
                publicHealthGuidanceTitle: 'ORIENTACI√ìN DE SALUD P√öBLICA',
                dataStatisticsTitle: 'DATOS Y ESTAD√çSTICAS',
                resourcesTitle: 'RECURSOS',
                latestArticlesTitle: '√öLTIMOS ART√çCULOS Y ACTUALIZACIONES',
                
                // ‰æßËæπÊ†è
                quickLinks: 'Enlaces R√°pidos',
                overview: 'Resumen',
                resources: 'Recursos',
                relatedTopicsTitle: 'Temas Relacionados',
                allRelatedTopics: 'Todos los Temas Relacionados',
                recentArticles: 'Art√≠culos Recientes',
                stayInformed: 'Mant√©ngase Informado',
                emailUpdates: 'Reciba actualizaciones por correo electr√≥nico sobre este tema',
                emailPlaceholder: 'Ingrese su correo electr√≥nico',
                subscribe: 'Suscribirse',
                shareThisPage: 'Compartir Esta P√°gina',
                
                // ÊñáÁ´†Áõ∏ÂÖ≥
                viewAllArticles: 'Ver Todos los Art√≠culos ‚Üí',
                noArticles: 'A√∫n no hay art√≠culos publicados',
                goToAdmin: 'Ir al panel de administraci√≥n',
                publishFirstArticle: 'para publicar su primer art√≠culo',
                loading: 'Cargando...',
                loadingArticles: 'üìù Cargando √∫ltimos art√≠culos...',
                
                // È°µËÑö
                aboutCDC: 'Acerca de CDC',
                mission: 'Misi√≥n',
                leadership: 'Liderazgo',
                organization: 'Organizaci√≥n',
                jobs: 'Empleos',
                policies: 'Pol√≠ticas',
                privacyPolicy: 'Pol√≠tica de Privacidad',
                accessibility: 'Accesibilidad',
                foia: 'FOIA',
                qualityStandards: 'Est√°ndares de Calidad',
                connect: 'Conectar',
                contactUs: 'Cont√°ctenos',
                emailUpdatesFooter: 'Actualizaciones por Correo',
                socialMedia: 'Redes Sociales',
                mobileApp: 'Aplicaci√≥n M√≥vil',
                languages: 'Idiomas',
                copyright: '¬© 2025 Centros para el Control y la Prevenci√≥n de Enfermedades. Todos los derechos reservados.',
                department: 'Departamento de Salud y Servicios Humanos de EE.UU. | CDC',
                
                // ÂÖ±‰∫´ÊåâÈíÆ
                facebook: 'Facebook',
                twitter: 'Twitter',
                linkedin: 'LinkedIn',
                print: 'Imprimir'
            }
        };
        
        this.init();
    }
    
    init() {
        this.updateLanguageButtons();
        this.translatePage();
        this.bindEvents();
    }
    
    bindEvents() {
        const langButtons = document.querySelectorAll('.lang-btn');
        langButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                const lang = button.getAttribute('data-lang');
                this.switchLanguage(lang);
            });
        });
    }
    
    switchLanguage(lang) {
        if (this.translations[lang]) {
            this.currentLanguage = lang;
            localStorage.setItem('preferred-language', lang);
            this.updateLanguageButtons();
            this.translatePage();
            
            // Ëß¶ÂèëËØ≠Ë®ÄÂàáÊç¢‰∫ã‰ª∂
            window.dispatchEvent(new CustomEvent('languageChanged', {
                detail: { language: lang }
            }));
            
            console.log(`ËØ≠Ë®ÄÂ∑≤ÂàáÊç¢Âà∞: ${lang === 'en' ? 'Ëã±ËØ≠' : 'Ë•øÁè≠ÁâôËØ≠'}`);
        }
    }
    
    updateLanguageButtons() {
        const langButtons = document.querySelectorAll('.lang-btn');
        langButtons.forEach(button => {
            button.classList.remove('active');
            if (button.getAttribute('data-lang') === this.currentLanguage) {
                button.classList.add('active');
            }
        });
    }
    
    translatePage() {
        const translations = this.translations[this.currentLanguage];
        
        // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢òÂíåmeta‰ø°ÊÅØ
        document.title = translations.pageTitle;
        const metaDesc = document.querySelector('meta[name="description"]');
        if (metaDesc) {
            metaDesc.setAttribute('content', translations.metaDescription);
        }
        
        // ÁøªËØëÊâÄÊúâÂ∏¶Êúâdata-translateÂ±ûÊÄßÁöÑÂÖÉÁ¥†
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            if (translations[key]) {
                if (element.tagName === 'INPUT' && element.type === 'text') {
                    element.placeholder = translations[key];
                } else {
                    element.textContent = translations[key];
                }
            }
        });
        
        // ÁøªËØëÊâÄÊúâÂ∏¶Êúâdata-translate-htmlÂ±ûÊÄßÁöÑÂÖÉÁ¥†ÔºàÊîØÊåÅHTMLÂÜÖÂÆπÔºâ
        document.querySelectorAll('[data-translate-html]').forEach(element => {
            const key = element.getAttribute('data-translate-html');
            if (translations[key]) {
                element.innerHTML = translations[key];
            }
        });
        
        // ÁâπÊÆäÂ§ÑÁêÜÔºöÊ†πÊçÆËØ≠Ë®ÄÊõ¥Êñ∞Ë•øÁè≠ÁâôËØ≠ÈìæÊé•
        const spanishLinks = document.querySelectorAll('.spanish-link');
        spanishLinks.forEach(link => {
            if (this.currentLanguage === 'es') {
                link.textContent = translations.spanishLink;
                link.href = '#';
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.switchLanguage('en');
                });
            } else {
                link.textContent = translations.spanishLink;
                link.href = '#';
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.switchLanguage('es');
                });
            }
        });
        
        console.log(`È°µÈù¢Â∑≤ÁøªËØë‰∏∫: ${this.currentLanguage === 'en' ? 'Ëã±ËØ≠' : 'Ë•øÁè≠ÁâôËØ≠'}`);
    }
    
    getText(key) {
        return this.translations[this.currentLanguage][key] || key;
    }
    
    getCurrentLanguage() {
        return this.currentLanguage;
    }
}

// ÂÖ®Â±ÄÁøªËØëÁ≥ªÁªüÂÆû‰æã
window.translationSystem = new TranslationSystem(); 